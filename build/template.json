{
  "builders": [{
    "type": "virtualbox-iso",
    "boot_command": [
      "<enter><f6><esc>",
      "<bs><bs><bs><bs><bs>",
      "<bs><bs><bs><bs><bs>",
      "<bs><bs><bs><bs><bs>",
      "<bs><bs><bs><bs><bs>",
      "<bs><bs><bs><bs><bs>",
      "<bs><bs><bs><bs><bs>",
      "<bs><bs><bs><bs><bs>",
      "<bs><bs><bs><bs><bs>",
      "<bs><bs><bs><bs><bs>",
      "<bs><bs><bs><bs><bs>",
      "<bs><bs><bs><bs><bs>",
      "<bs><bs><bs><bs><bs>",
      "<bs><bs><bs><bs><bs>",
      "<bs><bs><bs><bs><bs>",
      "<bs><bs><bs><bs><bs>",
      "<bs><bs><bs><bs><bs>",
      "<bs><bs><bs>",
      "auto preseed/url=http://{{ .HTTPIP }}:{{ .HTTPPort }}/preseed.cfg ",
      "debian-installer=en_CA locale=en_CA kbd-chooser/method=us ",
      "hostname=rails-5-jade ",
      "fb=false debconf/frontend=noninteractive ",
      "keyboard-configuration/modelcode=SKIP keyboard-configuration/layout=USA ",
      "keyboard-configuration/variant=USA console-setup/ask_detect=false ",
      "vga=788 initrd=/install/initrd.gz quiet --- ",
      "<enter>"
    ],
    "boot_wait": "4s",
    "guest_os_type": "Ubuntu_64",
    "http_directory": "http",
    "iso_checksum": "23e97cd5d4145d4105fbf29878534049",
    "iso_checksum_type": "md5",
    "iso_url": "http://releases.ubuntu.com/16.04/ubuntu-16.04-server-amd64.iso",
    "ssh_username": "vagrant",
    "ssh_password": "vagrant",
    "ssh_wait_timeout": "10000s",
    "disk_size": "8000",
    "shutdown_command": "echo 'vagrant' | sudo -S shutdown -P now",
    "vboxmanage": [
      [
        "modifyvm",
        "{{.Name}}",
        "--memory",
        "512"
      ],
      [
        "modifyvm",
        "{{.Name}}",
        "--cpus",
        "1"
      ]
    ]
  }],
  "provisioners": [{
    "type": "shell",
    "inline": [
      "sleep 30",
      "sudo mkdir ~vagrant/.ssh",
      "sudo chmod 700 ~vagrant/.ssh",
      "sudo wget --no-check-certificate 'https://raw.githubusercontent.com/mitchellh/vagrant/master/keys/vagrant.pub' -O ~vagrant/.ssh/authorized_keys",
      "sudo chmod 600 ~vagrant/.ssh/authorized_keys",
      "sudo chown -R vagrant:vagrant ~vagrant/.ssh",
      "sudo apt-get update -y -qq",
      "sudo apt-get install -y -q virtualbox-guest-utils virtualbox-guest-dkms",
      "sudo apt-get install -y -q linux-headers-$(uname -r) build-essential dkms",
      "sudo apt-get install -y -q ruby sqlite3 libsqlite3-dev ruby-dev",
      "sudo gem install jekyll",
      "sudo apt-get install -y -q patch zlib1g-dev liblzma-dev",
      "curl -sL https://deb.nodesource.com/setup_5.x | sudo -E bash -",
      "sudo apt-get install -y -q -y nodejs",
      "sudo apt-get install -y -q postgresql-9.5 postgresql-server-dev-9.5",
      "sudo gem install pg",
      "sudo apt-get install -y -q libqtwebkit-dev gstreamer1.0-plugins-base gstreamer1.0-tools gstreamer1.0-x xvfb",
      "sudo apt-get dist-upgrade -y -qq",
      "sudo apt-get autoremove -y -qq",
      "sudo gem install rails -v 5.0.0.rc1 --pre"
    ]
  }],
  "post-processors": [
    {
        "type": "vagrant",
        "only": ["virtualbox-iso"],
        "output": "package.box"
    }
  ]
}
