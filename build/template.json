{
  "variables": {
    "Name": "rails-5-jade"
  },
  "builders": [{
    "type": "virtualbox-iso",
    "boot_command": [
      "<esc><esc><enter><wait>",
      "/install/vmlinuz noapic ",
      "preseed/url=https://github.com/lcreid/rails-5-jade/raw/master/build/preseed.cfg ",
      "debian-installer=en_US auto locale=en_US kbd-chooser/method=us ",
      "fb=false debconf/frontend=noninteractive ",
      "keyboard-configuration/modelcode=SKIP keyboard-configuration/layout=USA ",
      "keyboard-configuration/variant=USA console-setup/ask_detect=false ",
      "initrd=/install/initrd.gz -- <enter>"
    ],
    "guest_os_type": "Ubuntu_64",
    "iso_url": "http://releases.ubuntu.com/16.04/ubuntu-16.04-server-amd64.iso",
    "iso_checksum": "23e97cd5d4145d4105fbf29878534049",
    "iso_checksum_type": "md5",
    "ssh_username": "vagrant",
    "ssh_password": "vagrant",
    "ssh_wait_timeout": "10000s",
    "disk_size": "8000",
    "shutdown_command": "echo 'packer' | sudo -S shutdown -P now",
    "vboxmanage": [
      [
        "modifyvm",
        "{{.Name}}",
        "--memory",
        "512"
      ],
      [
        "modifyvm",
        "{{.Name}}",
        "--cpus",
        "1"
      ]
    ]
  }],
  "provisioners": [{
    "type": "shell",
    "inline": [
      "sleep 30",
      "sudo apt-get update",
      "sudo apt-get install -y -q linux-headers-$(uname -r) build-essential dkms",
      "sudo apt-get install -y -q ruby sqlite3 libsqlite3-dev ruby-dev",
      "sudo gem install jekyll",
      "sudo apt-get install -y -q patch zlib1g-dev liblzma-dev",
      "curl -sL https://deb.nodesource.com/setup_5.x | sudo -E bash -",
      "sudo apt-get install -y -q -y nodejs",
      "sudo apt-get install -y -q postgresql-9.5 postgresql-server-dev-9.5",
      "sudo gem install pg",
      "sudo apt-get install -y -q libqtwebkit-dev gstreamer1.0-plugins-base gstreamer1.0-tools gstreamer1.0-x xvfb",
      "sudo apt-get dist-upgrade",
      "sudo apt-get autoremove",
      "sudo gem install rails -v 5.0.0.rc1 --pre"
    ]
  }]
}
